<html>

<head>
    <title>Metasploit 5 on Kali Linux</title>
    <link rel="stylesheet" type="text/css" href="index.css">
</head>

<body>
    <article>
        <h1>Metasploit 5 on Kali Linux</h1>
        <div class="step">
            <p>1. Get the latest version of the Metasploit Framework.</p>
            <div class="code-block">
                <div class="code-line">
                    <span class="prompt">root@kali:/#</span>
                    <code>apt update; apt install metasploit-framework</code>
                </div>
            </div>
        </div>

        <div class="step">
            <p>2. Start the PostgreSQL server.</p>
            <span class="step-note">From Metasploit 5's <a href="https://github.com/rapid7/metasploit-framework/wiki/Metasploit-5.0-Release-Notes" target="_blank">release notes</a>: <i>users can now run the PostgreSQL database by itself as a RESTful service, which allows for multiple Metasploit consoles and external tools to interact with it.</i></span>
            <div class="code-block">
                <div class="code-line">
                    <span class="prompt">root@kali:/#</span>
                    <code>service postgresql start</code>
                </div>
            </div>
        </div>

        <div class="step">
            <p>3. Create and initialize the DB.</p>
            <div class="code-block">
                <div class="code-line">
                    <span class="prompt">root@kali:/#</span>
                    <code>msfdb init</code>
                </div>
                <div class="code-line">
                    <code>[i] Database already started</code>
                </div>
                <div class="code-line">
                    <code>[i] The database appears to be already configured, skipping initialization</code>
                </div>
            </div>
        </div>

        <div class="step">
            <p>4. Start Metasploit's console-based interface.</p>
            <div class="code-block">
                <div class="code-line">
                    <span class="prompt">root@kali:/#</span>
                    <code>msfconsole</code>
                </div>
                </br>
                <div class="code-line">
                    <code>...</code>
                </div>
                </br>
                <div class="code-line">
                    <code>=[ metasploit v5.0.53-dev ]</code>
                </div>
                <div class="code-line">
                    <code>+ -- --=[ 1931 exploits - 1079 auxiliary - 331 post ]</code>
                </div>
                <div class="code-line">
                    <code>+ -- --=[ 556 payloads - 45 encoders - 10 nops ]</code>
                </div>
                <div class="code-line">
                    <code>+ -- --=[ 7 evasion</code>
                </div>
            </div>
        </div>

        <div class="step">
            <p>5. Check that Metasploit is connected to the DB.</p>
            <div class="code-block">
                <div class="code-line">
                    <span class="prompt">msf5 > </span>
                    <code>db_status</code>
                </div>
                <div class="code-line">
                    <code>[*] Connected to msf. Connection type: postgresql.</code>
                </div>
            </div>
        </div>

        <div class="step">
            <p>6. List most relevant commands.</p>
            <div class="code-block">
                <div class="code-line">
                    <span class="prompt">msf5 > </span>
                    <code>help</code>
                </div>
            </div>
        </div>

        <div class="step">
            <p>7. Search for a specific module by name or full path.</p>
            <span class="step-note">Alternatively, you can search directly on Metasploit's <a href="https://metasploit.help.rapid7.com/docs" target="_blank">web docs</a>.</span>
            <div class="code-block">
                <div class="code-line">
                    <span class="prompt">msf5 > </span>
                    <code>search [module]</code>
                </div>
            </div>
        </div>

        <div class="step">
            <p>8. See more info about a module.</p>
            <div class="code-block">
                <div class="code-line">
                    <span class="prompt">msf5 > </span>
                    <code>info [module]</code>
                </div>
                <br />
                <div class="code-line">
                    <code>...</code>
                </div>
                <br />
                <div class="code-line">
                    <code>Basic options:</code>
                </div>
                <table>
                    <thead>
                        <tr>
                            <td>Name</td>
                            <td>Current Settings</td>
                            <td>Required</td>
                            <td>Description</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>RHOSTS</td>
                            <td></td>
                            <td>yes</td>
                            <td>The target host(s), range CIDR identifier, or hosts file with syntax 'file:<path>'</td>
                        </tr>
                        <tr>
                            <td>RPORT</td>
                            <td>445</td>
                            <td>yes</td>
                            <td>The SMB service port (TCP)</td>
                        </tr>
                        <tr>
                            <td>SMBPIPE</td>
                            <td>BROWSER</td>
                            <td>yes</td>
                            <td>The pipe name to use (BROWSER, SRVSVC)</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="step">
            <p>9. Setup the module.</p>
            <div class="code-block">
                <div class="code-line">
                    <span class="prompt">msf5 > </span>
                    <code>set RHOST [ip]</code>
                </div>
                <div class="code-line">
                    <span class="prompt">msf5 > </span>
                    <code>set RPORT [port]</code>
                </div>
                <div class="code-line">
                    <code>...</code>
                </div>
            </div>
        </div>

        <div class="step">
            <p>10. List targets.</p>
            <div class="code-block">
                <div class="code-line">
                    <span class="prompt">msf5 > </span>
                    <code>show targets</code>
                </div>
            </div>
        </div>

        <div class="step">
            <p>11. List available payloads for selected targets.</p>
            <div class="code-block">
                <div class="code-line">
                    <span class="prompt">msf5 > </span>
                    <code>show payloads</code>
                </div>
            </div>
        </div>

        <div class="step">
            <p>12. Select payload.</p>
            <span class="step-note">If we don't select a payload, Metasploit uses the default.</span>
            <div class="code-block">
                <div class="code-line">
                    <span class="prompt">msf5 > </span>
                    <code>set payload [payload_name]</code>
                </div>
            </div>
        </div>

        <div class="step">
            <p>13. Show exploit options and payload suggestions.</p>
            <div class="code-block">
                <div class="code-line">
                    <span class="prompt">msf5 > </span>
                    <code>show options</code>
                </div>
            </div>
        </div>

        <div class="step">
            <p>14. Run exploit.</p>
            <div class="code-block">
                <div class="code-line">
                    <span class="prompt">msf5 > </span>
                    <code>exploit</code>
                </div>
            </div>
        </div>
    </article>
</body>

</html>