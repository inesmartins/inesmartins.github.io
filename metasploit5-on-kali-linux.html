<html>

<head>
    <title>Metasploit 5 on Kali Linux</title>
    <link rel="stylesheet" type="text/css" href="index.css">
</head>

<body>
    <article>
        <h1>Metasploit 5 on Kali Linux</h1>
        <p class="last-update">Last update on October 2019.</p>
        <div class="step">
            <p>1. Get the latest version of the Metasploit Framework.</p>
            <div class="code-block">
                <div class="code-line">
                    <span class="prompt">root@kali:/#</span>
                    <code>apt update; apt install metasploit-framework</code>
                </div>
            </div>
        </div>

        <div class="step">
            <p>2. Start the PostgreSQL server.</p>
            <span class="step-note">With Metasploit 5 the DB can be ran by itself, which allows for multiple Metasploit consoles and external tools to interact with it.</span>
            <div class="code-block">
                <div class="code-line">
                    <span class="prompt">root@kali:/#</span>
                    <code>service postgresql start</code>
                </div>
            </div>
        </div>

        <div class="step">
            <p>3. Start Metasploit's console-based interface.</p>
            <div class="code-block">
                <div class="code-line">
                    <span class="prompt">root@kali:/#</span>
                    <code>msfconsole</code>
                </div>
                </br>
                <div class="code-line">
                    <code>...</code>
                </div>
                </br>
                <div class="code-line">
                    <code>=[ metasploit <bold style="color: red;">v5.0.53-dev</bold> ]</code>
                </div>
                <div class="code-line">
                    <code>+ -- --=[ 1931 exploits - 1079 auxiliary - 331 post ]</code>
                </div>
                <div class="code-line">
                    <code>+ -- --=[ 556 payloads - 45 encoders - 10 nops ]</code>
                </div>
                <div class="code-line">
                    <code>+ -- --=[ 7 evasion</code>
                </div>
            </div>
        </div>

        <div class="step">
            <p>4. Check that Metasploit is connected to the DB.</p>
            <div class="code-block">
                <div class="code-line">
                    <span class="prompt">msf5 > </span>
                    <code>db_status</code>
                </div>
                <div class="code-line">
                    <code>[*] Connected to msf. Connection type: postgresql.</code>
                </div>
            </div>
        </div>

        <div class="step">
            <p>5. List Metasploit's most relevant commands.</p>
            <div class="code-block">
                <div class="code-line">
                    <span class="prompt">msf5 > </span>
                    <code>help</code>
                </div>
            </div>
        </div>

        <div class="step">
            <p>6. List the available workspaces.</p>
            <div class="code-block">
                <div class="code-line">
                    <span class="prompt">msf5 > </span>
                    <code>workspace</code>
                </div>
                <div class="code-line">
                    <code>* default</code>
                </div>
            </div>
        </div>

        <div class="step">
            <p>7. Add a new workspace.</p>
            <div class="code-block">
                <div class="code-line">
                    <span class="prompt">msf5 > </span>
                    <code>workspace -a testymcgee</code>
                </div>
                <div class="code-line">
                    <code>[*] Added workspace: testymcgee</code>
                </div>
                <div class="code-line">
                    <code>[*] Workspace: testymcgee</code>
                </div>
            </div>
        </div>

        <div class="step">
            <p>8. Select a workspace.</p>
            <div class="code-block">
                <div class="code-line">
                    <span class="prompt">msf5 > </span>
                    <code>workspace default</code>
                </div>
                <div class="code-line">
                    <code>[*] Workspace: default</code>
                </div>
            </div>
        </div>

        <div class="step">
            <p>9. Delete a workspace.</p>
            <div class="code-block">
                <div class="code-line">
                    <span class="prompt">msf5 > </span>
                    <code>workspace -d testymcgee</code>
                </div>
                <div class="code-line">
                    <code>[*] Deleted workspace: testymcgee</code>
                </div>
                <div class="code-line">
                    <code>[*] Swiched to workspace: default</code>
                </div>
            </div>
        </div>

        <div class="step">
            <p>10. Search for a specific module.</p>
            <span class="step-note">Alternatively, you can search directly on Metasploit's <a href="https://metasploit.help.rapid7.com/docs" target="_blank">web docs</a>.</span>
            <div class="code-block">
                <div class="code-line">
                    <span class="prompt">msf5 > </span>
                    <code>search <bold style="color: red;">wordpress</bold></code>
                </div>
                <br class="hide-mobile"/>
                <div class="code-line hide-mobile">
                    <code>Matching Modules</code>
                </div>
                <br class="hide-mobile"/>
                <table class="hide-mobile">
                    <thead>
                        <tr>
                            <td>#</td>
                            <td>Name</td>
                            <td>Disclosure Date</td>
                            <td>Rank</td>
                            <td>Check</td>
                            <td>Description</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>0</td>
                            <td>auxiliary/admin/http/wp_custom_contact_forms</td>
                            <td>2014-08-07</td>
                            <td>normal</td>
                            <td>No</td>
                            <td>WordPress custom-contact-forms Plugin SQL Upload</td>
                        </tr>
                        <tr>
                            <td>1</td>
                            <td>auxiliary/admin/http/wp_easycart_privilege_escalation</td>
                            <td>2015-02-25</td>
                            <td>normal</td>
                            <td>Yes</td>
                            <td>WordPress WP EasyCart Plugin Privilege Escalation</td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>auxiliary/admin/http/wp_gdpr_compliance_privesc</td>
                            <td>2018-11-08</td>
                            <td>normal</td>
                            <td>Yes</td>
                            <td>WordPress WP GDPR Compliance Plugin Privilege Escalation</td>
                        </tr>
                    </tbody>
                </table>
                <div class="code-line hide-mobile">
                    <code>...</code>
                </div>
            </div>
        </div>

        <div class="step">
            <p>11. See more information about a module.</p>
            <span class="step-note">This includes the module's name, path, description, date of disclosure, <a href="https://github.com/rapid7/metasploit-framework/wiki/Exploit-Ranking" target="_blank">rank</a>, support for the <a href="https://github.com/rapid7/metasploit-framework/wiki/How-to-write-a-check%28%29-method" target="_blank">check command</a>, author, basic options and references.</span>
            <div class="code-block">
                <div class="code-line">
                    <span class="prompt">msf5 > </span>
                    <code>info [module_path]</code>
                </div>
                <br />
                <div class="code-line">
                    <code>...</code>
                </div>
                <br />
                <div class="code-line">
                    <code>Basic options:</code>
                </div>
                <table>
                    <thead>
                        <tr>
                            <td>Name</td>
                            <td>Current Settings</td>
                            <td>Required</td>
                            <td>Description</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>RHOSTS</td>
                            <td></td>
                            <td>yes</td>
                            <td>The target host(s)</td>
                        </tr>
                        <tr>
                            <td>RPORT</td>
                            <td>1234</td>
                            <td>yes</td>
                            <td>The target port (TCP)</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="step">
            <p>12. Setup the module.</p>
            <div class="code-block">
                <div class="code-line">
                    <span class="prompt">msf5 > </span>
                    <code>set RHOST [ip]</code>
                </div>
                <div class="code-line">
                    <span class="prompt">msf5 > </span>
                    <code>set RPORT [port]</code>
                </div>
                <div class="code-line">
                    <code>...</code>
                </div>
            </div>
        </div>

        <div class="step">
            <p>13. Select an exploit module.</p>
            <div class="code-block">
                <div class="code-line">
                    <span class="prompt">msf5 > </span>
                    <code>use [exploit_path]</code>
                </div>
            </div>
        </div>
        
        <div class="step">
            <p>14. Show options for the selected exploit.</p>
            <span class="step-note">Shows the exploit's configuration and current target.</span>
            <div class="code-block">
                <div class="code-line">
                    <span class="prompt">msf5 exploit(<bold style="color: red;">[exploit_path]</bold>) ></span>
                    <code>show options</code>
                </div>
            </div>
        </div>

        <div class="step">
            <p>15. List the targets supported by the exploit.</p>
            <div class="code-block">
                <div class="code-line">
                    <span class="prompt">msf5 exploit(<bold style="color: red;">[exploit_path]</bold>) ></span>
                    <code>show targets</code>
                </div>
            </div>
        </div>

        <div class="step">
            <p>16. List available payloads for these targets.</p>
            <div class="code-block">
                <div class="code-line">
                    <span class="prompt">msf5 exploit(<bold style="color: red;">[exploit_path]</bold>) ></span>
                    <code>show payloads</code>
                </div>
            </div>
        </div>

        <div class="step">
            <p>17. Select a payload.</p>
            <div class="code-block">
                <div class="code-line">
                    <span class="prompt">msf5 exploit(<bold style="color: red;">[exploit_path]</bold>) ></span>
                    <code>set payload [payload_path]</code>
                </div>
                <div class="code-line">
                    <code>payload => [payload_path]</code>
                </div>
            </div>
        </div>

        <div class="step">
            <p>18. Run the exploit.</p>
            <span class="step-note">If we don't select a payload, Metasploit uses the default.</span>
            <div class="code-block">
                <div class="code-line">
                    <span class="prompt">msf5 exploit(<bold style="color: red;">[exploit_path]</bold>) ></span>
                    <code>exploit</code>
                </div>
            </div>
        </div>


        <div class="step">
            <p>19. Return to "main menu".</p>
            <div class="code-block">
                <div class="code-line">
                    <span class="prompt">msf5 exploit(<bold style="color: red;">[exploit_path]</bold>) ></span>
                    <code>back</code>
                </div>
                <div class="code-line">
                    <span class="prompt">msf5 > </span>
                </div>
            </div>
        </div>
    </article>
</body>

</html>